# ========================================
# WAIG RAG System - Production Environment Configuration
# AWS EC2 Deployment with Existing Infrastructure
# ========================================

# IMPORTANT: This config uses EXISTING MongoDB, RabbitMQ, and Qdrant containers
# Copy this file to .env and update with your actual values
# Command: cp .env.production.example .env

# ========================================
# OpenAI Configuration (REQUIRED)
# ========================================
OPENAI_API_KEY=sk-proj-your-openai-api-key-here
OPENAI_MODEL=gpt-4o-mini-2024-07-18
OPENAI_EMBEDDING_MODEL=text-embedding-3-large
OPENAI_WHISPER_MODEL=whisper-1

# ========================================
# LlamaParse Configuration (REQUIRED)
# ========================================
LLAMA_CLOUD_API_KEY=llx-your-llamaparse-api-key-here

# ========================================
# Langfuse Observability (REQUIRED)
# ========================================
# RAG Backend Langfuse
LANGFUSE_SECRET_KEY=sk-lf-your-secret-key-here
LANGFUSE_PUBLIC_KEY=pk-lf-your-public-key-here
LANGFUSE_HOST=https://langfuse.wadhwaniaiglobal.com

# Middleware Langfuse (separate keys)
LANGFUSE_SECRET_KEY_MIDDLEWARE=sk-lf-your-middleware-secret-key-here
LANGFUSE_PUBLIC_KEY_MIDDLEWARE=pk-lf-your-middleware-public-key-here

# ========================================
# MongoDB Configuration (Existing Container)
# Container name: my-mongo
# Network: rag_network, ragnet
# ========================================
DATABASE_NAME=fastapi_db
DATABASE_USERNAME=
DATABASE_PASSWORD=

# ========================================
# RabbitMQ Configuration (Existing Container)
# Container name: my-rabbitmq
# Network: rag_network, ragnet
# ========================================
RABBITMQ_USERNAME=guest
RABBITMQ_PASSWORD=guest
CHAT_QUEUE_NAME=chat_processing_queue

# ========================================
# Qdrant Configuration (Existing Container)
# Container name: qdrant
# Network: bridge, rag_network, ragnet
# ========================================
QDRANT_API_KEY=
QDRANT_COLLECTION_NAME=rag_documents

# ========================================
# JWT & Security Configuration (REQUIRED)
# ========================================
# Generate a strong secret key using: openssl rand -hex 32
SECRET_KEY=change-me-in-production-use-openssl-rand-hex-32
LONG_ACCESS_TOKEN_EXPIRE_DAYS=30

# ========================================
# CORS Configuration
# ========================================
# Production: Specify exact origins
# Development: Use * for all origins
BACKEND_CORS_ORIGINS=http://localhost:3000,https://healthcare-agents.wadhwaniaiglobal.com,http://healthcare-agents.wadhwaniaiglobal.com,*

# ========================================
# Superuser Token (REQUIRED)
# ========================================
# This token is used by the worker to authenticate bot responses
# Generate during setup with: python setup_rag_system.py
# Example format: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPERUSER_TOKEN=your-superuser-jwt-token-from-setup-script

# ========================================
# Worker Configuration
# ========================================
WORKER_ENABLED=true

# ========================================
# RAG API Configuration
# ========================================
RAG_USE_QUERY_EXPANSION=false
RAG_USE_RERANKING=true

# ========================================
# Application Configuration
# ========================================
APP_ENV=production
LOG_LEVEL=INFO
MAX_CHUNK_SIZE=1000
CHUNK_OVERLAP=200
MAX_RETRIEVALS=10

# ========================================
# Frontend Configuration (REQUIRED)
# ========================================
# For local development: http://localhost:8080
# For AWS EC2: http://your-ec2-public-ip:8080
# For domain: https://api.yourdomain.com
REACT_APP_API_URL=http://localhost:8080

# ========================================
# AWS EC2 Specific Settings
# ========================================
# Set this to your EC2 instance's public IP or domain
# Example: EC2_PUBLIC_IP=54.123.45.67
# Then set: REACT_APP_API_URL=http://54.123.45.67:8080
EC2_PUBLIC_IP=

# ========================================
# Optional: Redis for Caching
# ========================================
REDIS_URL=redis://localhost:6379/0

# ========================================
# Project Name
# ========================================
PROJECT_NAME=FastAPI MongoEngine App

# ========================================
# DEPLOYMENT NOTES
# ========================================
#
# Your existing infrastructure containers:
# - my-mongo (MongoDB) - Port 27017
# - my-rabbitmq (RabbitMQ) - Ports 5672, 15672
# - qdrant (Vector Store) - Port 6333
#
# These containers MUST be running before deploying applications
#
# Networks:
# - rag_network (172.19.0.0/16)
# - ragnet (172.18.0.0/16)
#
# Deployment command:
# docker-compose -f docker-compose.production.yml up -d
#
